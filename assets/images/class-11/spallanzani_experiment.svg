<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 650" width="1000" height="650">
  <defs>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&amp;display=swap');

      .title-text {
        font-family: 'Merriweather', serif;
        font-size: 24px;
        font-weight: 700;
        fill: #1a1a2e;
      }

      .label-text {
        font-family: 'Merriweather', serif;
        font-size: 16px;
        font-weight: 600;
        fill: #2d3436;
      }

      .small-text {
        font-family: 'Merriweather', serif;
        font-size: 14px;
        fill: #636e72;
      }

      .result-text {
        font-family: 'Merriweather', serif;
        font-size: 15px;
        font-weight: 700;
      }

      /* Animations */
      @keyframes bubble-rise {
        0% {
          transform: translateY(0);
          opacity: 1;
        }
        100% {
          transform: translateY(-50px);
          opacity: 0;
        }
      }

      @keyframes microbe-appear {
        0% {
          opacity: 0;
          transform: scale(0);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes wiggle {
        0%, 100% {
          transform: rotate(-3deg);
        }
        50% {
          transform: rotate(3deg);
        }
      }

      .bubble {
        animation: bubble-rise 2s ease-in-out infinite;
      }

      .microbe {
        animation: microbe-appear 1.5s ease-out 2s forwards, wiggle 1s ease-in-out infinite;
        opacity: 0;
        transform-origin: center;
      }

      .flame {
        animation: wiggle 0.5s ease-in-out infinite;
      }
    </style>
  </defs>

  <!-- Background -->
  <rect width="1000" height="650" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="500" y="40" text-anchor="middle" class="title-text">
    Experimento de Lazzaro Spallanzani (1765)
  </text>

  <!-- Step 1: Boiling -->
  <g id="step-1">
    <text x="180" y="90" text-anchor="middle" class="label-text" fill="#e67e22">
      PASO 1: Hervir
    </text>

    <!-- Flask being heated -->
    <ellipse cx="180" cy="160" rx="50" ry="15" fill="#e8f4f8" stroke="#2980b9" stroke-width="2"/>
    <rect x="130" y="160" width="100" height="120" fill="#87ceeb" stroke="#2980b9" stroke-width="2"/>
    <ellipse cx="180" cy="280" rx="50" ry="15" fill="#4a90a4" stroke="#2980b9" stroke-width="2"/>

    <!-- Caldo label -->
    <text x="180" y="230" text-anchor="middle" class="small-text" fill="white">
      Caldo
    </text>

    <!-- Fire -->
    <ellipse cx="180" cy="310" rx="40" ry="20" fill="#e74c3c" opacity="0.6" class="flame"/>
    <path d="M 160 310 Q 180 290 200 310" fill="#f39c12" opacity="0.7" class="flame"/>

    <!-- Bubbles -->
    <circle cx="165" cy="260" r="5" fill="white" opacity="0.7" class="bubble"/>
    <circle cx="185" cy="250" r="6" fill="white" opacity="0.6" class="bubble" style="animation-delay: 0.5s;"/>
    <circle cx="175" cy="240" r="4" fill="white" opacity="0.8" class="bubble" style="animation-delay: 1s;"/>

    <text x="180" y="345" text-anchor="middle" class="small-text" font-style="italic">
      Mata microorganismos
    </text>
  </g>

  <!-- Arrow -->
  <path d="M 250 220 L 330 220" stroke="#2d3436" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Left Side: CONTROL (Flask Open to Air) -->
  <g id="control-group">
    <text x="500" y="90" text-anchor="middle" class="label-text" fill="#e74c3c">
      GRUPO CONTROL: Expuesto al Aire
    </text>

    <!-- Flask (open) -->
    <ellipse cx="500" cy="140" rx="45" ry="12" fill="none" stroke="#2980b9" stroke-width="2"/>
    <rect x="455" y="140" width="90" height="140" fill="#e8f4f8" stroke="#2980b9" stroke-width="2"/>
    <ellipse cx="500" cy="280" rx="45" ry="12" fill="#4a90a4" stroke="#2980b9" stroke-width="2"/>

    <!-- Air particles entering -->
    <circle cx="480" cy="120" r="3" fill="#95a5a6" opacity="0.6"/>
    <circle cx="510" cy="115" r="2" fill="#95a5a6" opacity="0.5"/>
    <circle cx="490" cy="125" r="2.5" fill="#95a5a6" opacity="0.7"/>

    <!-- Microorganisms appear -->
    <circle cx="480" cy="210" r="5" fill="#27ae60" class="microbe"/>
    <circle cx="500" cy="220" r="4" fill="#2ecc71" class="microbe" style="animation-delay: 2.2s;"/>
    <circle cx="520" cy="205" r="5" fill="#27ae60" class="microbe" style="animation-delay: 2.4s;"/>
    <circle cx="490" cy="235" r="4" fill="#2ecc71" class="microbe" style="animation-delay: 2.6s;"/>

    <!-- Arrow -->
    <path d="M 500 310 L 500 360" stroke="#2d3436" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

    <!-- Result box -->
    <rect x="400" y="370" width="200" height="100" fill="#ffe6e6" stroke="#e74c3c" stroke-width="3" rx="8"/>
    <text x="500" y="400" text-anchor="middle" class="result-text" fill="#c0392b">
      ✓ Aparecen
    </text>
    <text x="500" y="420" text-anchor="middle" class="result-text" fill="#c0392b">
      Microorganismos
    </text>
    <text x="500" y="445" text-anchor="middle" class="small-text">
      Caldo se vuelve turbio
    </text>
  </g>

  <!-- Right Side: EXPERIMENTAL (Flask Sealed) -->
  <g id="experimental-group">
    <text x="800" y="90" text-anchor="middle" class="label-text" fill="#27ae60">
      GRUPO EXPERIMENTAL: Sellado
    </text>

    <!-- Flask (sealed) -->
    <ellipse cx="800" cy="140" rx="45" ry="12" fill="#e8f4f8" stroke="#2980b9" stroke-width="2"/>
    <rect x="755" y="140" width="90" height="140" fill="#e8f4f8" stroke="#2980b9" stroke-width="2"/>
    <ellipse cx="800" cy="280" rx="45" ry="12" fill="#4a90a4" stroke="#2980b9" stroke-width="2"/>

    <!-- Seal/Cork -->
    <rect x="765" y="130" width="70" height="15" fill="#8b4513" stroke="#5d2906" stroke-width="2" rx="3"/>
    <text x="800" y="125" text-anchor="middle" class="small-text" font-size="11px">
      SELLADO
    </text>

    <!-- NO microorganisms -->
    <text x="800" y="210" text-anchor="middle" class="small-text" fill="#95a5a6" font-style="italic">
      Caldo permanece
    </text>
    <text x="800" y="230" text-anchor="middle" class="small-text" fill="#95a5a6" font-style="italic">
      cristalino
    </text>

    <!-- Arrow -->
    <path d="M 800 310 L 800 360" stroke="#2d3436" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

    <!-- Result box -->
    <rect x="700" y="370" width="200" height="100" fill="#d5f4e6" stroke="#27ae60" stroke-width="3" rx="8"/>
    <text x="800" y="400" text-anchor="middle" class="result-text" fill="#27ae60">
      ✗ NO Aparecen
    </text>
    <text x="800" y="420" text-anchor="middle" class="result-text" fill="#27ae60">
      Microorganismos
    </text>
    <text x="800" y="445" text-anchor="middle" class="small-text">
      Caldo permanece estéril
    </text>
  </g>

  <!-- Arrow marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2d3436" />
    </marker>
  </defs>

  <!-- Conclusion -->
  <rect x="50" y="500" width="900" height="50" fill="#fff3e0" stroke="#f39c12" stroke-width="2" rx="5"/>
  <text x="500" y="520" text-anchor="middle" class="small-text" font-weight="700" fill="#d68910">
    CONCLUSIÓN DE SPALLANZANI: Los microorganismos provienen del aire
  </text>
  <text x="500" y="540" text-anchor="middle" class="small-text" font-weight="600" fill="#d68910">
    (Pero los críticos argumentaron que "sellar destruye la fuerza vital del aire")
  </text>

  <!-- Objection box -->
  <rect x="50" y="570" width="900" height="65" fill="#ffe6e6" stroke="#e74c3c" stroke-width="2" rx="5"/>
  <text x="500" y="590" text-anchor="middle" class="small-text" font-weight="700" fill="#c0392b">
    ⚠️ OBJECIÓN VITALISTA (John Needham):
  </text>
  <text x="500" y="610" text-anchor="middle" class="small-text" fill="#c0392b">
    "Hervir y sellar destruye la 'fuerza vital' necesaria para la generación espontánea.
  </text>
  <text x="500" y="627" text-anchor="middle" class="small-text" fill="#c0392b">
    ¿Cómo permitir entrada de aire SIN entrada de microorganismos?"
  </text>

</svg>
