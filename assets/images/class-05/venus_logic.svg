<?xml version="1.0" encoding="UTF-8"?>
<svg width="600" height="500" viewBox="0 0 600 500" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <!-- Gradients for 3D effect -->
        <linearGradient id="grad-face-blue" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
        </linearGradient>
        <linearGradient id="grad-side-blue" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:#00c6fb;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#005bea;stop-opacity:1" />
        </linearGradient>
        
        <linearGradient id="grad-face-orange" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:#f6d365;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#fda085;stop-opacity:1" />
        </linearGradient>

        <linearGradient id="grad-face-red" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:#ff9a9e;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#fecfef;stop-opacity:1" />
        </linearGradient>
     
        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
            <feOffset dx="3" dy="3" result="offsetblur"/>
            <feComponentTransfer>
                <feFuncA type="linear" slope="0.3"/>
            </feComponentTransfer>
            <feMerge> 
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/> 
            </feMerge>
        </filter>

        <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#555" />
        </marker>
        
        <style>
            .label { font-family: 'Segoe UI', sans-serif; font-weight: bold; text-anchor: middle; }
            .sublabel { font-family: 'Segoe UI', sans-serif; font-size: 12px; text-anchor: middle; fill: #555; }
            .box-face { filter: url(#shadow); stroke: #fff; stroke-width: 1; }
            .connector { stroke: #555; stroke-width: 2; fill: none; marker-end: url(#arrow); stroke-dasharray: 4; }
            
            /* Animations - Apply to Inner Groups */
            /* Using transform here is safe because it's on the inner group */
            .anim-inner { opacity: 0; transform-origin: center; animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
            .anim-line { opacity: 0; stroke-dasharray: 4; animation: drawLine 0.5s linear forwards; }
            
            @keyframes popIn {
                0% { opacity: 0; transform: scale(0.8) translateY(20px); }
                100% { opacity: 1; transform: scale(1) translateY(0); }
            }
            @keyframes drawLine {
                0% { opacity: 0; stroke-dashoffset: 100; }
                100% { opacity: 1; stroke-dashoffset: 0; }
            }
            
            /* Delays */
            .d-1 { animation-delay: 0.2s; }
            .d-2 { animation-delay: 1.0s; } /* Arrows */
            .d-3 { animation-delay: 1.5s; } /* Predictions */
            .d-4 { animation-delay: 2.5s; } /* Observation */
            .d-5 { animation-delay: 3.5s; } /* Results Arrows */
            .d-6 { animation-delay: 4.0s; } /* Results */
            
            /* Checkmark Animation */
            .checkmark-path { stroke-dasharray: 100; stroke-dashoffset: 100; animation: dash 0.5s ease-out forwards 4.5s; }
             @keyframes dash { to { stroke-dashoffset: 0; } }
        </style>
    </defs>

    <!-- Background Grid -->
    <path d="M0 0 L600 0 L600 500 L0 500 Z" fill="#f8f9fa" />
    <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
        <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e0e0e0" stroke-width="1"/>
    </pattern>
    <rect width="100%" height="100%" fill="url(#grid)" />

    <!-- Title -->
    <text x="300" y="30" class="label" style="font-size: 22px; fill: #333;">Lógica de la Contrastación</text>

    <!-- GROUP 1: HYPOTHESES (Row 1) -->
    <!-- Ptolomeo -->
    <g transform="translate(50, 60)">
        <g class="anim-inner d-1" style="transform-origin: 90px 30px;">
            <path d="M0 0 L180 0 L200 -10 L20 -10 Z" fill="#b0c4de" />
            <path d="M180 0 L180 60 L200 50 L200 -10 Z" fill="#778899" />
            <rect x="0" y="0" width="180" height="60" fill="#e3f2fd" class="box-face" stroke="#2196f3" />
            <text x="90" y="25" class="label" fill="#1565c0">Hipótesis de Ptolomeo</text>
            <text x="90" y="45" class="sublabel">Venus gira alrededor de Tierra</text>
        </g>
    </g>

    <!-- Copernico -->
    <g transform="translate(370, 60)">
        <g class="anim-inner d-1" style="transform-origin: 90px 30px;">
            <path d="M0 0 L180 0 L200 -10 L20 -10 Z" fill="#b0c4de" />
            <path d="M180 0 L180 60 L200 50 L200 -10 Z" fill="#778899" />
            <rect x="0" y="0" width="180" height="60" fill="#e3f2fd" class="box-face" stroke="#2196f3" />
            <text x="90" y="25" class="label" fill="#1565c0">Hipótesis de Copérnico</text>
            <text x="90" y="45" class="sublabel">Venus gira alrededor del Sol</text>
        </g>
    </g>

    <!-- ARROWS TO PREDICTIONS -->
    <path d="M140 120 L140 150" class="connector anim-line d-2" />
    <path d="M460 120 L460 150" class="connector anim-line d-2" />

    <!-- GROUP 2: PREDICTIONS (Row 2) -->
    <g transform="translate(50, 160)">
        <g class="anim-inner d-3" style="transform-origin: 70px 25px;">
            <rect x="20" y="0" width="140" height="50" fill="#fff" stroke="#999" rx="5" filter="url(#shadow)" />
            <text x="90" y="20" class="label" style="font-size:12px; fill:#666">PREDICCIÓN A</text>
            <text x="90" y="38" class="sublabel">Solo fases crecientes</text>
        </g>
    </g>

    <g transform="translate(370, 160)">
        <g class="anim-inner d-3" style="transform-origin: 70px 25px;">
            <rect x="20" y="0" width="140" height="50" fill="#fff" stroke="#999" rx="5" filter="url(#shadow)" />
            <text x="90" y="20" class="label" style="font-size:12px; fill:#666">PREDICCIÓN B</text>
            <text x="90" y="38" class="sublabel">Fases completas (llena)</text>
        </g>
    </g>

    <!-- GROUP 3: OBSERVATION (Row 3 - Center) -->
    <g transform="translate(180, 240)">
        <g class="anim-inner d-4" style="transform-origin: 120px 35px;">
            <path d="M0 0 L240 0 L250 -10 L10 -10 Z" fill="#ffe0b2" />
            <path d="M240 0 L240 70 L250 60 L250 -10 Z" fill="#ffcc80" />
            <rect x="0" y="0" width="240" height="70" fill="#fff3e0" class="box-face" stroke="#ef6c00" stroke-width="2" />
            <text x="120" y="25" class="label" style="font-size:16px; fill:#e65100;">OBSERVACIÓN REAL</text>
            <text x="120" y="50" class="label" style="font-size:14px; fill:#ef6c00;">¡Venus se ve LLENA!</text>
        </g>
    </g>

    <!-- ARROWS FROM OBSERVATION -->
    <path d="M250 310 L140 360" class="connector anim-line d-5" style="stroke:#d84315; stroke-dasharray:0" /> 
    <path d="M350 310 L460 360" class="connector anim-line d-5" style="stroke:#2e7d32; stroke-dasharray:0" /> 

    <!-- GROUP 4: RESULTS (Row 4) -->
    <g transform="translate(50, 370)">
        <g class="anim-inner d-6" style="transform-origin: 90px 30px;">
            <rect x="0" y="0" width="180" height="60" fill="#ffebee" stroke="#c62828" rx="5" filter="url(#shadow)" />
            <text x="90" y="25" class="label" fill="#c62828" style="font-size:18px">REFUTACIÓN</text>
            <text x="90" y="45" class="sublabel" fill="#c62828">(Modus Tollens)</text>
            <!-- X Mark -->
            <path d="M160 10 L170 20 M170 10 L160 20" stroke="#c62828" stroke-width="2" class="checkmark-path" />
        </g>
    </g>

    <g transform="translate(370, 370)">
        <g class="anim-inner d-6" style="transform-origin: 100px 30px;">
            <rect x="0" y="0" width="200" height="60" fill="#e8f5e9" stroke="#2e7d32" rx="5" filter="url(#shadow)" />
            <text x="90" y="25" class="label" fill="#2e7d32" style="font-size:18px">CORROBORACIÓN</text>
            <text x="90" y="45" class="sublabel" fill="#2e7d32">(Provisional)</text>
            <!-- Check Mark -->
            <path d="M175 25 L180 35 L195 10" stroke="#2e7d32" stroke-width="3" fill="none" class="checkmark-path" />
        </g>
    </g>

</svg>
