/* Unit Page Styles - Magazine Layout for Individual Classes */

/* ========================================
   CLASS CONTAINER & CONTENT
   ======================================== */

.class-container {
  max-width: var(--content-max-width);
  margin: 0 auto;
  padding: var(--space-xl) var(--space-lg);
  position: relative;
}

/* Fondo similar al index - Grid sutil */

/* Grafiti astronómico de fondo - estilo pizarra */
.class-container::before {
  content: 'Tierra ⊕\A  ↓\A○ ← Epiciclo\A  ↓\A● Deferente\A\A  ☉ Sol\A\A★ Estrellas fijas\A\AMovimiento\Aretrógrado ⟲\A\Aθ = ωt\A\Ar = a·cos(θ)';
  position: fixed;
  top: 15%;
  right: 5%;
  font-family: 'Caveat', 'Comic Sans MS', cursive;
  font-size: 24px;
  font-weight: 700;
  line-height: 1.6;
  white-space: pre;
  color: rgba(255, 255, 255, 0.35);
  text-shadow:
    0 2px 4px rgba(65, 105, 225, 0.4),
    0 4px 8px rgba(0, 0, 0, 0.25),
    -2px -2px 3px rgba(255, 255, 255, 0.6),
    2px 2px 4px rgba(65, 105, 225, 0.3);
  pointer-events: none;
  z-index: 0;
  transform: rotate(-8deg);
  letter-spacing: 1px;
}

.class-container::after {
  content: 'GEOCENTRISMO\A\A  Ptolomeo\A  ~150 d.C.\A\A  Paradigma:\A  Tierra = Centro\A\A  Anomalía:\A  Planetas\A  retroceden';
  position: fixed;
  bottom: 15%;
  left: 5%;
  font-family: 'Caveat', 'Comic Sans MS', cursive;
  font-size: 22px;
  font-weight: 700;
  line-height: 1.5;
  white-space: pre;
  color: rgba(255, 255, 255, 0.32);
  text-shadow:
    0 2px 4px rgba(65, 105, 225, 0.4),
    0 4px 8px rgba(0, 0, 0, 0.25),
    -2px -2px 3px rgba(255, 255, 255, 0.6),
    2px 2px 4px rgba(65, 105, 225, 0.3);
  pointer-events: none;
  z-index: 0;
  transform: rotate(5deg);
  letter-spacing: 1px;
}

[data-theme="dark"] .class-container::before {
  color: rgba(255, 255, 255, 0.22);
  text-shadow:
    0 3px 6px rgba(65, 105, 225, 0.6),
    0 5px 10px rgba(0, 0, 0, 0.6),
    -2px -2px 4px rgba(255, 255, 255, 0.4),
    2px 2px 5px rgba(65, 105, 225, 0.5),
    0 0 30px rgba(65, 105, 225, 0.3);
}

[data-theme="dark"] .class-container::after {
  color: rgba(255, 255, 255, 0.2);
  text-shadow:
    0 3px 6px rgba(65, 105, 225, 0.6),
    0 5px 10px rgba(0, 0, 0, 0.6),
    -2px -2px 4px rgba(255, 255, 255, 0.4),
    2px 2px 5px rgba(65, 105, 225, 0.5),
    0 0 30px rgba(65, 105, 225, 0.3);
}

.class-content {
  background: var(--color-bg-primary);
  padding: var(--space-xl);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  border: 1px solid var(--color-border);
}

[data-theme="dark"] .class-content {
  box-shadow: 0 0 0 2px rgba(65, 105, 225, 0.3), 0 4px 20px rgba(0, 0, 0, 0.4);
}

/* ========================================
   CLASS HEADER
   ======================================== */

.class-header {
  text-align: center;
  margin-bottom: var(--space-2xl);
  padding-bottom: var(--space-lg);
  border-bottom: 1px solid var(--color-border);
}

.class-badge {
  display: inline-block;
  font-family: var(--font-serif);
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-bold);
  letter-spacing: 3px;
  text-transform: uppercase;
  color: #FFFFFF;
  background: linear-gradient(135deg, var(--color-accent), var(--color-accent-light, var(--color-accent-hover)));
  border: none;
  padding: var(--space-sm) var(--space-lg);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-md);
  transition: all var(--transition-normal);
  box-shadow: 0 4px 12px rgba(65, 105, 225, 0.3);
}

.class-badge:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(65, 105, 225, 0.4);
}

.class-title {
  font-family: var(--font-serif);
  font-size: var(--font-size-h1);
  font-weight: var(--font-weight-bold);
  line-height: 1.1;
  color: var(--color-text-primary);
  margin: var(--space-md) 0;
  letter-spacing: -0.02em;
}

.class-subtitle {
  font-family: var(--font-sans);
  font-size: var(--font-size-xl);
  line-height: var(--line-height-normal);
  color: var(--color-text-secondary);
  margin-top: var(--space-md);
  font-weight: var(--font-weight-normal);
}

/* ========================================
   PROGRESS BAR
   ======================================== */

.class-progress {
  background: var(--color-bg-secondary);
  border-bottom: 1px solid var(--color-border);
  padding: var(--space-sm) 0;
  position: relative;
  z-index: 50;
  transition: background-color var(--transition-normal);
}

.class-progress .container {
  max-width: var(--container-max-width);
  margin: 0 auto;
  padding: 0 var(--space-lg);
}

.progress-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-sm);
  font-size: var(--font-size-small);
}

.progress-label {
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

.progress-count {
  font-weight: var(--font-weight-bold);
  color: var(--color-accent);
}

.progress-bar {
  width: 100%;
  height: 6px;
  background: var(--color-border);
  border-radius: 3px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-accent), var(--color-accent-light, var(--color-highlight)));
  transition: width 0.5s ease;
  box-shadow: 0 0 10px rgba(65, 105, 225, 0.3);
}

/* ========================================
   CLASS SECTIONS
   ======================================== */

.class-section {
  margin-bottom: 60px;
  padding-bottom: var(--space-lg);
}

.class-section h2 {
  font-family: var(--font-serif);
  font-size: var(--font-size-h2);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  margin-top: var(--space-2xl);
  margin-bottom: var(--space-lg);
  letter-spacing: -0.01em;
}

.class-section h3 {
  font-family: var(--font-serif);
  font-size: var(--font-size-h3);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-top: var(--space-xl);
  margin-bottom: var(--space-md);
}

.class-section h4 {
  font-family: var(--font-sans);
  font-size: var(--font-size-h4);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-top: var(--space-lg);
  margin-bottom: var(--space-sm);
}

.class-section p {
  line-height: var(--line-height-relaxed);
  margin-bottom: 1.5em;
  color: var(--color-text-primary);
}

.class-section ul,
.class-section ol {
  margin: var(--space-md) 0;
  padding-left: var(--space-xl);
  line-height: var(--line-height-relaxed);
}

.class-section li {
  margin-bottom: var(--space-sm);
}

/* ========================================
   DROP CAP - First Letter Style
   ======================================== */

.class-section>p:first-of-type::first-letter {
  font-family: var(--font-serif);
  font-size: 3.5em;
  font-weight: var(--font-weight-bold);
  line-height: 0.9;
  float: left;
  margin: 0.1em 0.1em 0 0;
  color: var(--color-accent);
}

/* ========================================
   IMAGES - Magazine Style
   ======================================== */

.class-content img {
  width: 100%;
  max-width: 500px;
  height: auto;
  border-radius: var(--radius-md);
  margin: var(--space-lg) auto;
  display: block;
  filter: grayscale(0.2);
  transition: filter 0.4s ease, transform 0.4s ease;
  box-shadow: var(--shadow-md);
}

.class-content img:hover {
  filter: grayscale(0);
  transform: scale(1.02);
}

.class-image-small {
  max-width: 220px !important;
  width: auto !important;
  height: auto !important;
  max-height: 280px !important;
  object-fit: contain !important;
  border: 4px solid #87CEEB !important; /* Marco celeste (sky blue) */
  border-radius: 8px !important;
  box-sizing: border-box !important;
}

.class-image-medium {
  max-width: 250px !important;
  width: 100%;
  max-height: 300px !important;
  object-fit: contain;
}

.class-image-diagram {
  max-width: 500px !important;
  width: 100% !important;
  height: auto !important;
  object-fit: contain !important;
  border: 4px solid #87CEEB !important; /* Marco celeste (sky blue) */
  border-radius: 8px !important;
  box-sizing: border-box !important;
}

/* Responsive images for tablets */
@media (max-width: 1024px) {
  .class-content img {
    max-width: 400px;
  }

  .class-image-small {
    max-width: 320px !important;
  }

  .class-image-medium {
    max-width: 450px !important;
  }
}

/* Responsive images for mobile */
@media (max-width: 768px) {
  .class-content img {
    max-width: 100%;
    margin: var(--space-md) auto;
  }

  .class-image-small {
    max-width: 100% !important;
  }

  .class-image-medium {
    max-width: 100% !important;
  }
}

/* Responsive images for small mobile */
@media (max-width: 480px) {
  .class-content img {
    border-radius: var(--radius-sm);
    margin: var(--space-sm) auto;
  }
}

.image-caption {
  text-align: center;
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
  margin-top: var(--space-sm);
  font-style: italic;
}

/* ========================================
   CONCEPT HIGHLIGHTS - Editorial Callouts
   ======================================== */

.concept-highlight {
  background: var(--color-bg-accent, var(--color-bg-secondary));
  border-left: 6px solid var(--color-accent);
  padding: var(--space-lg);
  margin: var(--space-xl) 0;
  border-radius: var(--radius-md);
  box-shadow: 0 2px 8px rgba(65, 105, 225, 0.1);
}

.concept-highlight h3,
.concept-highlight h4 {
  color: var(--color-accent);
  margin-top: var(--space-md);
  margin-bottom: var(--space-sm);
}

.concept-highlight h3:first-child,
.concept-highlight h4:first-child {
  margin-top: 0;
}

.concept-highlight p:last-child {
  margin-bottom: 0;
}

.concept-highlight strong {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-bold);
}

/* ========================================
   KEY CONCEPTS LIST
   ======================================== */

.key-concepts {
  background: var(--color-bg-secondary);
  padding: var(--space-lg);
  border-radius: var(--radius-md);
  margin: var(--space-xl) 0;
}

.key-concepts h3 {
  font-family: var(--font-serif);
  font-size: var(--font-size-h3);
  color: var(--color-accent);
  margin-bottom: var(--space-md);
}

.key-concepts ul {
  list-style: none;
  padding-left: 0;
}

.key-concepts li {
  padding-left: var(--space-lg);
  position: relative;
  margin-bottom: var(--space-md);
}

.key-concepts li::before {
  content: "→";
  position: absolute;
  left: 0;
  color: var(--color-accent);
  font-weight: var(--font-weight-bold);
}

.key-concepts strong {
  color: var(--color-accent);
  font-weight: var(--font-weight-bold);
}

/* ========================================
   DEVELOPMENT QUESTIONS
   ======================================== */

.development-question {
  background: linear-gradient(135deg, #FFF5F7 0%, #FFF 100%);
  border-left: 6px solid var(--color-highlight);
  padding: var(--space-lg);
  margin-bottom: var(--space-xl);
  border-radius: var(--radius-md);
  box-shadow: 0 2px 8px rgba(255, 51, 102, 0.1);
  transition: all var(--transition-normal);
}

.development-question:hover {
  box-shadow: 0 4px 16px rgba(255, 51, 102, 0.15);
  transform: translateY(-2px);
}

.development-question h3 {
  font-family: var(--font-sans);
  font-size: var(--font-size-h4);
  color: var(--color-highlight);
  margin-bottom: var(--space-md);
  font-weight: var(--font-weight-semibold);
}

.development-question p {
  margin-bottom: var(--space-md);
}

.development-question p strong {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-bold);
}

.development-question p:last-child {
  margin-bottom: 0;
}

/* New Grid Layout for Questions */
.activity-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-lg);
  margin-bottom: var(--space-xl);
}

.question-card {
  background: var(--color-bg-tertiary);
  padding: var(--space-lg);
  border-left: 4px solid var(--color-accent);
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
  display: flex;
  flex-direction: column;
}

.question-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.question-card h3 {
  margin-top: 0;
  font-family: var(--font-serif);
  font-size: var(--font-size-h4);
  color: var(--color-accent);
  margin-bottom: var(--space-md);
}

.question-card p {
  margin-bottom: 0;
  flex-grow: 1;
}

[data-theme="dark"] .question-card {
  background: var(--color-bg-tertiary);
  /* Falls back to dark theme tertiary */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .question-card:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
}

/* Mobile Responsiveness for Quiz Grid */
/* Mobile Responsiveness for Quiz Grid */
/* Mobile Responsiveness for Quiz Grid */
/* Mobile Responsiveness for Quiz Grid */
@media (max-width: 1024px) {
  .activity-container {
    display: block;
    /* Stack vertically like a book */
    margin: 0;
    padding: 0;
  }

  .question-card {
    width: 100%;
    margin-bottom: var(--space-md);
    /* Drastically reduce padding to give text space */
    padding: var(--space-md) var(--space-sm);
  }
}

/* ========================================
   CLASS NAVIGATION
   ======================================== */

.class-navigation {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: var(--space-md);
  margin-top: var(--space-2xl);
  padding: var(--space-xl) 0;
  border-top: 2px solid var(--color-border);
}

.nav-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  padding: 10px 20px;
  background: var(--color-bg-primary);
  border: 2px solid var(--color-accent);
  border-radius: var(--radius-md);
  color: var(--color-accent);
  font-family: var(--font-sans);
  font-size: 15px;
  font-weight: var(--font-weight-semibold);
  text-decoration: none;
  transition: all var(--transition-normal);
  white-space: nowrap;
  min-height: 40px;
  max-width: 180px;
}

.nav-button:hover {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: #FFFFFF;
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(65, 105, 225, 0.4);
}

[data-theme="dark"] .nav-button {
  border-color: #4169E1;
  box-shadow: 0 0 10px rgba(65, 105, 225, 0.5);
}

[data-theme="dark"] .nav-button:hover {
  box-shadow: 0 0 20px rgba(65, 105, 225, 0.8), 0 4px 16px rgba(65, 105, 225, 0.6);
}

.nav-button-index {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: #FFFFFF;
  box-shadow: 0 4px 12px rgba(65, 105, 225, 0.3);
}

.nav-button-index:hover {
  background: var(--color-accent-hover);
  border-color: var(--color-accent-hover);
  box-shadow: 0 6px 16px rgba(65, 105, 225, 0.5);
}

[data-theme="dark"] .nav-button-index {
  box-shadow: 0 0 15px rgba(65, 105, 225, 0.6), 0 4px 12px rgba(65, 105, 225, 0.4);
}

[data-theme="dark"] .nav-button-index:hover {
  box-shadow: 0 0 25px rgba(65, 105, 225, 0.9), 0 6px 16px rgba(65, 105, 225, 0.6);
}

.class-navigation .nav-button:first-child {
  justify-self: start;
}

.class-navigation .nav-button:last-child {
  justify-self: end;
}

/* ========================================
   RESPONSIVE ADJUSTMENTS
   ======================================== */

@media (max-width: 768px) {
  .class-container {
    padding: 0;
    /* Full bleed, no outer padding */
    width: 100%;
    max-width: 100%;
    margin: 0;
  }

  .class-content {
    border-radius: 0;
    border: none;
    box-shadow: none;
    /* Mimic "book page" feeling: minimal side margins as requested (approx 2px-5px effectively) */
    padding: var(--space-lg) 5px;
    width: 100%;
  }

  /* Adjust headers and paragraphs to have slightly more breathing room inwardly if needed, 
     but keeping the text close to edge as requested ("2px") */
  .class-section p,
  .class-section h2,
  .class-section h3,
  .class-section ul {
    padding-left: 5px;
    padding-right: 5px;
  }

  /* Ensure images span full width */
  .class-content img {
    border-radius: 0;
    width: 100%;
    max-width: 100%;
    margin-left: 0;
    margin-right: 0;
  }

  .class-header {
    margin-bottom: var(--space-lg);
    padding: 0 5px;
  }

  .class-navigation {
    grid-template-columns: 1fr;
    gap: var(--space-md);
    padding: var(--space-lg) 5px;
  }



  .class-section {
    margin-bottom: 30px;
  }

  .class-section>p:first-of-type::first-letter {
    font-size: 2.5em;
  }

  .class-navigation {
    grid-template-columns: 1fr;
    gap: var(--space-md);
  }

  .class-navigation .nav-button:first-child,
  .class-navigation .nav-button:last-child {
    justify-self: stretch;
  }

  .nav-button {
    width: 100%;
    padding: var(--space-md) var(--space-lg);
  }

  .progress-info {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-xs);
  }

  .class-content img {
    max-width: 100%;
  }

  /* Remove conflicting padding rules that were overriding the book layout */
  .class-content {
    background: transparent;
    /* Remove white box background to kill the "frame" */
    padding: 0;
    /* Let text flow freely */
  }

  .class-content>* {
    /* Apply the minimal margin directly to children */
    padding-left: 5px;
    padding-right: 5px;
  }

  .question-card {
    padding: var(--space-md) 5px;
    border-radius: 0;
    border-left: 2px solid var(--color-accent);
    /* Keep a subtle indicator */
    border-right: none;
    border-top: none;
    border-bottom: none;
    box-shadow: none;
    background: transparent;
  }
}


/* Hide graffiti on smaller screens to prevent overlap */
@media (max-width: 1280px) {

  .class-container::before,
  .class-container::after {
    display: none;
  }
}

@media (max-width: 480px) {
  .class-container {
    padding: var(--space-md) var(--space-sm);
  }

  .class-content {
    padding: var(--space-md);
    /* Further reduce padding on small phones */
  }

  .concept-highlight,
  .development-question,
  .key-concepts {
    padding: var(--space-md);
  }
}

/* ========================================
   DARK MODE SPECIFIC ADJUSTMENTS
   ======================================== */

[data-theme="dark"] .class-content img {
  filter: grayscale(0.3) brightness(0.85);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

[data-theme="dark"] .class-content img:hover {
  filter: grayscale(0) brightness(1);
}

[data-theme="dark"] .concept-highlight,
[data-theme="dark"] .development-question,
[data-theme="dark"] .key-concepts {
  background: var(--color-bg-tertiary);
}